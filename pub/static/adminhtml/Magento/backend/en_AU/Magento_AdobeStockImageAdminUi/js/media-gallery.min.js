define(['jquery','Magento_Ui/js/modal/confirm'],function($,confirm){'use strict';return{jsTreeRootFolderName:'Storage Root',jsTreeFolderNameMaxLength:20,locate:function(path){var i,folderName,openFolderChildrenButton,imageFolder,locatedImage,imagePath=path.replace(/^\/+/,''),imagePathParts=imagePath.split('/'),imageFilename=imagePath,imageFolderName=this.jsTreeRootFolderName;$.ajaxSetup({async:false});if(imagePathParts.length>1){imageFilename=imagePathParts[imagePathParts.length-1];imageFolderName=imagePathParts[imagePathParts.length-2];for(i=0;i<imagePathParts.length-2;i++){folderName=imagePathParts[i];if(folderName.length>this.jsTreeFolderNameMaxLength){folderName=folderName.substring(0,this.jsTreeFolderNameMaxLength)+'...';}
openFolderChildrenButton=$('.jstree a:contains("'+folderName+'")').prev('.jstree-icon');if(openFolderChildrenButton.length){openFolderChildrenButton.click();}}}
imageFolder=$('.jstree a:contains("'+imageFolderName+'")');if(imageFolder.length){imageFolder[0].click();locatedImage=$('div[data-row="file"]:has(img[alt=\"'+imageFilename+'\"])');return locatedImage.length?locatedImage:false;}
$.ajaxSetup({async:true});},notLocated:function(){confirm({title:$.mage.__('The image cannot be located'),content:$.mage.__('We cannot find this image in the media gallery.'),buttons:[{text:$.mage.__('Ok'),class:'action-primary',attr:{},click:function(event){this.closeModal(event);}}]});}};});