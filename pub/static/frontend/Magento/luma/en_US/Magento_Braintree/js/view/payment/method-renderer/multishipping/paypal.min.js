define(['jquery','underscore','Magento_Braintree/js/view/payment/method-renderer/paypal','Magento_Checkout/js/action/set-payment-information-extended','Magento_Checkout/js/model/payment/additional-validators','Magento_Checkout/js/model/full-screen-loader'],function($,_,Component,setPaymentInformationExtended,additionalValidators,fullScreenLoader){'use strict';return Component.extend({defaults:{template:'Magento_Braintree/payment/multishipping/paypal',submitButtonSelector:'#payment-continue span',paypalButtonSelector:'[id="parent-payment-continue"]',reviewButtonHtml:''},initObservable:function(){this.reviewButtonHtml=$(this.paypalButtonSelector).html();return this._super();},getPayPalConfig:function(){var config;config=this._super();config.flow='vault';config.enableShippingAddress=false;config.shippingAddressEditable=false;return config;},onActiveChange:function(isActive){this._super(isActive);this.updateSubmitButton(isActive);},beforePlaceOrder:function(data){this._super(data);this.updateSubmitButton(true);},getShippingAddress:function(){return{};},getData:function(){var data=this._super();data['additional_data']['is_active_payment_token_enabler']=true;return data;},isActiveVault:function(){return true;},isSkipOrderReview:function(){return false;},isPaymentMethodNonceReceived:function(){return this.paymentPayload.nonce!==null;},updateSubmitButton:function(isActive){if(this.isPaymentMethodNonceReceived()||!isActive){$(this.paypalButtonSelector).html(this.reviewButtonHtml);}},placeOrder:function(){fullScreenLoader.startLoader();$.when(setPaymentInformationExtended(this.messageContainer,this.getData(),true)).done(this.done.bind(this)).fail(this.fail.bind(this));},fail:function(){fullScreenLoader.stopLoader();return this;},done:function(){fullScreenLoader.stopLoader();$('#multishipping-billing-form').submit();return this;}});});